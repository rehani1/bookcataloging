{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="author" content="Yuina Barzdukas">
    <title>Book Home Page</title>
    <link rel="stylesheet" href="{% static 'bookcataloging/home.css' %}">
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet">
</head>

<body class ="d-flex flex-column min-vh-100">
    <header>
        {% include "bookcataloging/navbar.html" %}
    </header>
    <main class="flex-grow-1 container mt-4 mt-5">
        <h1 class="main-title">
            Book Catalog
        </h1>

        <p class="welcome-blurb text-center">
            Welcome to Book Catalog! Search for a book to check out, find some recommendations, and more!
        </p>

    
        <form action="{% url 'bookcataloging:index' %}" method="get">
            <div class="form-group w-25 ">
                <label for="search-category">Search By</label>
                <select class="form-control" id="search_by" name="search_by" onchange="this.form.submit()">
                    <option value="title" {% if search_by == "title" %}selected{% endif %}>Book Title</option>
                    <option value="author" {% if search_by == "author" %}selected{% endif %}>Author</option>
                    <option value="genre" {% if search_by == "genre" %}selected{% endif %}>Genre</option>
                </select>
            </div>
        </form>
            {% if search_by == "genre" %}
                <form action="{% url 'bookcataloging:search' %}" method="get">
                    <input type="hidden" name="search_by" value="genre">
                    <label for="genre">Search by Genre</label>
                    <select class="form-control w-25" id="query" name="query" onchange="this.form.submit()">
                        <option value="all_genres">Select</option>
                        <option value="fantasy">Fantasy</option>
                        <option value="mystery">Mystery</option>
                        <option value="romance">Romance</option>
                        <option value="science_fiction">Science Fiction</option>
                        <option value="non_fiction">Non-fiction</option>
                        <option value="historical">Historical</option>
                        <option value="thriller">Thriller</option>
                    </select>
                    <div class="justify-content-end d-flex">
                        <button type="submit" class="btn btn-primary ml-2">Search</button>
                    </div>
                </form>
            {% elif search_by == "author" %}
                <form action="{% url 'bookcataloging:search' %}" method="get">
                    <input type="hidden" name="search_by" value="author">
                    <label for="query">Search by Author</label>
                    <input class="form-control" type="search"  id="query" name="query" placeholder="Author name">
                    <div class="justify-content-end d-flex">
                        <button type="submit" class="btn btn-primary ml-2">Search</button>
                    </div>
                </form>
            {% else %}
                <form action="{% url 'bookcataloging:search' %}" method="get">
                    <label for="query">Search by Book Title</label>
                    <input class="form-control" type="search"  id="query" name="query" placeholder="Book title">
                    <div class="justify-content-end d-flex py-2">
                        <button 
                            type="submit" 
                            class="btn btn-primary ml-2"
                            style="background-color: rgba(62, 72, 183, 0.905);"
                        >
                            Search
                        </button>
                    </div>
                </form>
            {% endif %}


    </main>
</body>
<footer>
    {% include "bookcataloging/footer.html" %}
</footer>
</html>